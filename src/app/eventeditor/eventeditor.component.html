<div class="mainform">

  <app-hourglass [message]="message"></app-hourglass>
  <app-tuto title="Vendez les billets de votre événement !"
            image="https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/120/google/241/toolbox_1f9f0.png"
            subtitle="Afin de simplifier la fabrication d'événement, KERBERUS vous propose plusieurs modèles totalement personnalisables">
  </app-tuto>

  <br>
  <button class="app-button"
          style="margin-top: 10px;"
          mat-button mat-raised-button
          *ngIf="selTemplate!=null"
          (click)="selTemplate=null">
    <div class="bloc-bouton">Retour à la<br>liste des modèles</div>
  </button>
  <br>


  <div *ngIf="selTemplate==null">
    Sélectionner un modèle d'événement:<br><br>
    <div style="display: flex;flex-wrap: wrap;width:100%;justify-content: center;">
      <div *ngFor="let template of templates"
           name="template"
           style="cursor:pointer;font-size:x-small;width:150px;height:250px;text-align: center;margin: 15px;"
           (click)="openModele(template)">
        <div style="height:25px;">{{template.title}}</div>
        <img class="image-photo"
             [src]="template.visual"
             style="width:150px;height:150px;">
        <br>
        {{template.description}}
      </div>
    </div>
  </div>

  <div *ngIf="selTemplate">
      <h2>{{selTemplate.title}}</h2>
      <small>{{selTemplate.description}}</small>
    <br><br>
    <app-tuto label="Vous pouvez recevoir le modèle sur votre mail, le personnaliser et nous le renvoyer pour publication immédiate,
                     OU pouvez directement publier le modèle comme un événement fictif. Dans ce cas, seul les profils pilotes
                     pour 'fictivement' acheter des places. C'est un bon moyen de tester gratuitement KERBERUS">
    </app-tuto>

    <div *ngIf="!showCode" style="width:100%;text-align: center;font-size: small;">
      <img class="image-photo"
           (click)="showCode=true"
           [src]="selTemplate.visual"
           style="width:250px;height:250px;">
      <br>

        <br>

        Adapter ce modèle à votre événement<br>
        <button class="app-button "
                style="margin-top: 10px;"
                mat-button mat-raised-button
                (click)="showCode=true">
          Editer
        </button>


    </div>

    <div *ngIf="showCode" style="width:94%;margin-left:3%;touch-action: none;">
      Vous pouvez directement modifier les paramètres du modèle pour créer votre événement.<br>
      A la publication, le fichier de votre événement vous sera envoyé sur votre boite mail.
      <ngx-monaco-editor [options]="editorOptions"
                         style="text-align: left;height:400px;"
                         [(ngModel)]="code">
      </ngx-monaco-editor>
      <button class="app-button "
              style="margin-top: 10px;"
              mat-button mat-raised-button
              (click)="showCode=false">
        Fermer
      </button>
      &nbsp;
      <button class="app-button "
              style="margin-top: 10px;"
              mat-button mat-raised-button
              (click)="publish()">
        Publier
      </button>
    </div>

    <br>
    <br>

    <table style="width: 100%;" *ngIf="!showCode">
      <tr style="font-size: small;">
        <td style="width: 50%;">Créer un évenement fictif depuis ce modèle.<br>Cet évenement ne sera visible que des clients pilotes</td>
        <td></td>
        <td *ngIf="config.user?.email">
          Recevoir ce modèle sur votre mail, le personnaliser<br>et le renvoyer pour créer votre événement
        </td>
      </tr>
      <tr></tr>
      <tr>
        <td>
          <button class="app-button"
                  style="margin-top: 10px;"
                  id="cmdCreateFictif"
                  mat-button mat-raised-button
                  (click)="fictif()">
              Evénement fictif
          </button>
        </td>
        <td style="width: 10%;"></td>
        <td>
          <button class="app-button "
                  style="margin-top: 10px;"
                  id="cmdSendTemplate"
                  *ngIf="config.user?.email"
                  mat-button mat-raised-button
                  (click)="sendDemo()">
              Recevoir ce modèle
          </button>
        </td>
      </tr>
    </table>

  </div>

</div>
